const modal=document.querySelector(".modal"),modalOpenButton=document.querySelector(".modal-button"),modalCloseButton=modal.querySelector(".modal-close"),modalForm=modal.querySelector("form"),formName=modal.querySelector(".login-name"),formEmail=modal.querySelector(".login-email"),formComment=modal.querySelector(".login-message");let isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("login"),storageEmail=localStorage.getItem("email")}catch(o){isStorageSupport=!1}modalOpenButton.addEventListener("click",function(o){o.preventDefault,modal.classList.add("modal-show"),storageName&&storageEmail?(formName.value=storageName,formEmail.value=storageEmail,formComment.focus()):formName.focus()}),modalCloseButton.addEventListener("click",function(o){o.preventDefault,modal.classList.remove("modal-show"),modal.classList.remove("modal-error")}),window.addEventListener("keydown",function(o){27===o.keyCode&&modal.classList.contains("modal-show")&&(o.preventDefault,modal.classList.remove("modal-show"),modal.classList.remove("modal-error"))}),modalForm.addEventListener("submit",function(o){formName.value&&formEmail.value?isStorageSupport&&(localStorage.setItem("login",formName.value),localStorage.setItem("email",formEmail.value)):(o.preventDefault(),modal.classList.remove("modal-error"),modal.offsetWidth=modal.offsetWidth,modal.classList.add("modal-error"))});
